/*!
 * jquery.sumoselect - v2.1.0
 * http://hemantnegi.github.io/jquery.sumoselect
 */

!function(e,t,l,i){"namespace sumo";e.fn.SumoSelect=function(s){var n=e.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1,search:!1,searchText:"Search...",noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All"]},s),o=this.each(function(){var s=this;!this.sumo&&e(this).is("select")&&(this.sumo={E:e(s),is_multi:e(s).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],createElems:function(){var t=this;return t.E.wrap('<div class="SumoSelect" tabindex="0">'),t.select=t.E.parent(),t.caption=e("<span>"),t.CaptionCont=e('<p class="CaptionCont"><label><i></i></label></p>').addClass("SelectBox").attr("style",t.E.attr("style")).prepend(t.caption),t.select.append(t.CaptionCont),t.E.attr("disabled")&&t.select.addClass("disabled").removeAttr("tabindex"),n.outputAsCSV&&t.is_multi&&t.E.attr("name")&&(t.select.append(e('<input class="HEMANT123" type="hidden" />').attr("name",t.E.attr("name")).val(t.getSelStr())),t.E.removeAttr("name")),t.isMobile()&&!n.forceCustomRendering?void t.setNativeMobile():(t.E.addClass("SumoUnder").attr("tabindex","-1"),t.optDiv=e('<div class="optWrapper">'),t.floatingList(),t.optDiv.append('<ul class="options">'),n.selectAll&&t.selAll(),n.search&&t.Search(),e(t.E.children("option")).each(function(l,i){i=e(i),t.createLi(i)}),t.is_multi&&t.multiSelelect(),t.select.append(t.optDiv),t.basicEvents(),void t.selAllState())},createLi:function(t,l){var s=this;t.attr("value")||t.attr("value",t.val());var n=e('<li data-val="'+t.val()+'"><label>'+t.text()+"</label></li>");s.is_multi&&n.prepend("<span><i></i></span>"),t[0].disabled&&(n=n.addClass("disabled")),s.onOptClick(n),t[0].selected&&n.addClass("selected"),t.attr("class")&&n.addClass(t.attr("class"));var o=s.optDiv.children("ul.options");return l===i?o.append(n):o.children("li").eq(l).before(n),n},getSelStr:function(){return sopt=[],this.E.children("option:selected").each(function(){sopt.push(e(this).val())}),sopt.join(n.csvSepChar)},multiSelelect:function(){var t=this;t.optDiv.addClass("multiple"),t.okbtn=e('<p class="btnOk">'+n.locale[0]+"</p>").click(function(){n.triggerChangeCombined&&(changed=!1,t.E.children("option:selected").length!=t.Pstate.length?changed=!0:t.E.children("option:selected").each(function(){t.Pstate.indexOf(e(this).val())<0&&(changed=!0)}),changed&&(t.E.trigger("change"),t.mob&&t.E.trigger("click"),t.setText())),t.hideOpts()}),t.cancelBtn=e('<p class="btnCancel">'+n.locale[1]+"</p>").click(function(){t._cnbtn(),t.hideOpts()}),t.optDiv.append(e('<div class="MultiControls">').append(t.okbtn).append(t.cancelBtn))},_cnbtn:function(){var e=this;e.E.children("option:selected").each(function(){this.selected=!1}),e.optDiv.find("li.selected").removeClass("selected");for(var t=0;t<e.Pstate.length;t++)e.E.children('option[value="'+e.Pstate[t]+'"]')[0].selected=!0,e.optDiv.find('li[data-val="'+e.Pstate[t]+'"]').addClass("selected");e.selAllState()},selAll:function(){var t=this;t.is_multi&&(t.chkAll=e("<i>"),t.selAll=e('<p class="select-all"><label>'+n.locale[2]+"</label></p>").prepend(e("<span></span>").append(t.chkAll)),t.chkAll.on("click",function(){t.selAll.toggleClass("selected"),t.optDiv.find("ul.options li").not(".hidden").each(function(l,i){i=e(i),t.selAll.hasClass("selected")?i.hasClass("selected")||i.trigger("click"):i.hasClass("selected")&&i.trigger("click")})}),t.optDiv.prepend(t.selAll))},Search:function(){var t=this,l=t.CaptionCont.addClass("search"),i=e('<p class="no-match">');t.ftxt=e('<input type="text" class="search-txt" value="" placeholder="'+n.searchText+'">').on("click",function(e){e.stopPropagation()}),l.append(t.ftxt),t.optDiv.children("ul").after(i),t.ftxt.on("keyup.sumo",function(){var l=t.optDiv.find("ul.options li").each(function(l,i){i=e(i),i.text().toLowerCase().indexOf(t.ftxt.val().toLowerCase())>-1?i.removeClass("hidden"):i.addClass("hidden")}).not(".hidden");i.html(n.noMatch.replace(/\{0\}/g,t.ftxt.val())).toggle(!l.length),t.selAllState()})},selAllState:function(){var t=this;if(n.selectAll){var l=0,i=0;t.optDiv.find("ul.options li").not(".hidden").each(function(t,s){e(s).hasClass("selected")&&l++,e(s).hasClass("disabled")||i++}),l==i?t.selAll.removeClass("partial").addClass("selected"):0==l?t.selAll.removeClass("selected partial"):t.selAll.addClass("partial")}},showOpts:function(){var t=this;t.E.attr("disabled")||(t.is_opened=!0,t.select.addClass("open"),t.ftxt&&t.ftxt.focus(),e(l).on("click.sumo",function(e){if(!t.select.is(e.target)&&0===t.select.has(e.target).length){if(!t.is_opened)return;t.hideOpts(),t.is_multi&&n.okCancelInMulti&&t._cnbtn()}}),t.is_floating&&(H=t.optDiv.children("ul").outerHeight()+2,t.is_multi&&(H+=parseInt(t.optDiv.css("padding-bottom"))),t.optDiv.css("height",H)),t.is_multi&&(t.is_floating||n.okCancelInMulti)&&(t.Pstate=[],t.E.children("option:selected").each(function(){t.Pstate.push(e(this).val())})))},hideOpts:function(){var t=this;t.is_opened&&(t.is_opened=!1,t.select.removeClass("open").find("ul li.sel").removeClass("sel"),e(l).off("click.sumo"),t.select.focus())},setOnOpen:function(){var e=this,t=e.optDiv.find("ul li:not(.hidden)").eq(n.search?0:e.E[0].selectedIndex);e.optDiv.find("ul li.sel").removeClass("sel"),t.addClass("sel"),e.showOpts()},nav:function(e){var t,l=this,i="li:not(.disabled, .hidden)",s=l.optDiv.find("ul li.sel:not(.hidden)");if(l.is_opened&&s.length){if(t=e?s.prevAll(i):s.nextAll(i),!t.length)return;s.removeClass("sel"),s=t.first().addClass("sel");var n=l.optDiv.find("ul"),o=n.scrollTop(),a=s.position().top+o;a>=o+n.height()-s.outerHeight()&&n.scrollTop(a-n.height()+s.outerHeight()),o>a&&n.scrollTop(a)}else l.setOnOpen()},basicEvents:function(){var l=this;l.CaptionCont.click(function(e){l.E.trigger("click"),l.is_opened?l.hideOpts():l.showOpts(),e.stopPropagation()}),l.select.on("keydown.sumo",function(e){switch(e.which){case 38:l.nav(!0);break;case 40:l.nav(!1);break;case 32:if(l.ftxt.is(e.target))return;case 13:l.is_opened?l.optDiv.find("ul li.sel").trigger("click"):l.setOnOpen();break;case 9:case 27:return l.is_multi&&n.okCancelInMulti&&l._cnbtn(),void l.hideOpts();default:return}e.preventDefault()}),e(t).on("resize.sumo",function(){l.floatingList()})},onOptClick:function(t){var l=this;t.click(function(){var t=e(this);t.hasClass("disabled")||(txt="",l.is_multi?(t.toggleClass("selected"),l.E.children('option[value="'+t.data("val")+'"]')[0].selected=t.hasClass("selected"),l.selAllState()):(t.parent().find("li.selected").removeClass("selected"),t.toggleClass("selected"),l.E.val(t.attr("data-val"))),l.is_multi&&n.triggerChangeCombined&&(l.is_floating||n.okCancelInMulti)||(l.setText(),l.E.trigger("change").trigger("click")),l.is_multi||l.hideOpts())})},setText:function(){var t=this;if(t.placeholder="",t.is_multi){sels=t.E.children(":selected").not(":disabled");for(var l=0;l<sels.length;l++){if(l+1>=n.csvDispCount&&n.csvDispCount){sels.length==t.E.find("option").length&&n.captionFormatAllSelected?t.placeholder=n.captionFormatAllSelected.replace(/\{0\}/g,sels.length):t.placeholder=n.captionFormat.replace(/\{0\}/g,sels.length);break}t.placeholder+=e(sels[l]).text()+", "}t.placeholder=t.placeholder.replace(/,([^,]*)$/,"$1")}else t.placeholder=t.E.children(":selected").not(":disabled").text();var i=!1;t.placeholder||(i=!0,t.placeholder=t.E.attr("placeholder"),t.placeholder||(t.placeholder=t.E.children("option:disabled:selected").text())),t.placeholder=t.placeholder?n.prefix+" "+t.placeholder:n.placeholder,t.caption.html(t.placeholder);var s=t.select.find("input.HEMANT123");return s.length&&s.val(t.getSelStr()),i?t.caption.addClass("placeholder"):t.caption.removeClass("placeholder"),t.placeholder},isMobile:function(){for(var e=(navigator.userAgent||"").toLowerCase(),t=0;t<n.nativeOnDevice.length;t++)if(e.indexOf(n.nativeOnDevice[t].toLowerCase())>0)return!0;return!1},setNativeMobile:function(){var e=this;e.E.addClass("SelectClass"),e.mob=!0,e.E.change(function(){e.setText()})},floatingList:function(){var l=this;l.is_floating=e(t).width()<=n.floatWidth,l.optDiv.toggleClass("isFloating",l.is_floating),l.is_floating||l.optDiv.css("height",""),l.optDiv.toggleClass("okCancelInMulti",n.okCancelInMulti&&!l.is_floating)},vRange:function(e){var t=this;if(opts=t.E.children("option"),opts.length<=e||0>e)throw"index out of bounds";return t},toggSel:function(e,t){var l=this.vRange(t);l.E.children("option")[t].disabled||(l.E.children("option")[t].selected=e,l.mob||l.optDiv.find("ul.options li").eq(t).toggleClass("selected",e),l.setText())},toggDis:function(e,t){var l=this.vRange(t);l.E.children("option")[t].disabled=e,e&&(l.E.children("option")[t].selected=!1),l.mob||l.optDiv.find("ul.options li").eq(t).toggleClass("disabled",e).removeClass("selected"),l.setText()},toggSumo:function(e){var t=this;return t.enabled=e,t.select.toggleClass("disabled",e),e?(t.E.attr("disabled","disabled"),t.select.removeAttr("tabindex")):(t.E.removeAttr("disabled"),t.select.attr("tabindex","0")),t},toggSelAll:function(t){var l=this;l.E.find("option").each(function(i,s){l.E.find("option")[e(this).index()].disabled||(l.E.find("option")[e(this).index()].selected=t,l.mob||l.optDiv.find("ul.options li").eq(e(this).index()).toggleClass("selected",t),l.setText())}),l.mob||!n.selectAll&&!n.search||l.selAll.removeClass("partial").toggleClass("selected",t)},reload:function(){var t=this.unload();return e(t).SumoSelect(n)},unload:function(){var e=this;return e.select.before(e.E),e.E.show(),n.outputAsCSV&&e.is_multi&&e.select.find("input.HEMANT123").length&&e.E.attr("name",e.select.find("input.HEMANT123").attr("name")),e.select.remove(),delete s.sumo,s},add:function(t,l,n){if(t===i)throw"No value to add";var o=this;if(opts=o.E.children("option"),"number"==typeof l&&(n=l,l=t),l===i&&(l=t),opt=e("<option></option>").val(t).html(l),opts.length<n)throw"index out of bounds";return n===i||opts.length==n?(o.E.append(opt),o.mob||o.createLi(opt)):(opts.eq(n).before(opt),o.mob||o.createLi(opt,n)),s},remove:function(e){var t=this.vRange(e);t.E.children("option").eq(e).remove(),t.mob||t.optDiv.find("ul.options li").eq(e).remove(),t.setText()},selectItem:function(e){this.toggSel(!0,e)},unSelectItem:function(e){this.toggSel(!1,e)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(e){this.toggDis(!0,e)},enableItem:function(e){this.toggDis(!1,e)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){var e=this;return e.createElems(),e.setText(),e}},s.sumo.init())});return 1==o.length?o[0]:o}}(jQuery,window,document);
